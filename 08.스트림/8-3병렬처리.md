# 스트림의 특징 - 병렬 처리 지원

```
병렬 처리는 여러 작업을 동시에 처리하는 방식

예를 들어, 방을 청소하고, 설거지 하고, 빨래하는 3가지의 일을 해야한다고 가정하면, 직렬 처리 일때는 먼저 방을 다 청소하고, 설거지 하고, 빨래를 한다. 하지만 병렬처리라면 이 세 가지 일을 동시에 한다.

컴퓨터에서 병렬 처리는 여러 개의 CPU (코어) 가 있으면 각각의 코어가 다른 작업을 동시에 처리해서 더 빠르게 작업을 끝내도록 도와준다.
```

### 병렬 처리의 기본 개념

- 동시성과 병렬성의 차이
    - 동시성 (Concurrency): 여러 작업이 동시에 진행되는 것 (단일 프로세서에서도 가능, 스레드가 번갈아 가며 작업을 수행하는 경우)
    - 병렬성 (Parallelism): 여러 작업이 실제로 동시에 수행되는 것 (다수의 프로세서나 코어에서 각각 독립적으로 작업을 처리하는 경우)

### 병렬 처리의 장점

- 성능 향상
    : 대량의 데이터 처리/ 복잡한 계산 수행시, 여러 스레드나 프로세서를 활용하면 작업 시간 단축 가능

- 응답성 향상
    : GUI 애플리케이션에서 사용자 인터페이스가 응답하지 않게 하려고 긴 작업을 별도의 스레드에서 처리해 메인 스레드의 응답성을 높이기 가능

### 병렬 처리의 원리

- 작업 분할
    : 대량의 데이터 처리를 위한 작업을 여러 개의 서브 작업으로 나눔
- 작업 할당
    : 각 서브 작업을 여러 프로세서나 스레드에 할당 (작업의 크기와 복잡성을 고려해 최적의 분배가 이루어져야 함)
- 동시 실행
    : 각 스레드가 할당된 서브 작업 동시에 실행
- 결과 통합
    : 모든 서브 작업이 완료되면, 결과 통합해 최종 결과 도출

### 병렬 처리의 종류

- 데이터 병렬 처리 (Data Parallelism)
    : 데이터 집합을 여러 부분으로 나누고, 동일한 작업을 각각의 데이터 부분에 적용하는 방식

- 작업 병렬 처리 (Task Parallelism)
    : 서로 다른 작업을 동시에 수행하는 방식 (데이터 다운로드와 데이터 처리를 동시에 수행하는 경우)

### 병렬 처리 구현하는 방법

- 스레드 (Thread)
    : 스레드는 OS 가 관리하는 실행 단위 (여러 개의 스레드를 사용해 병렬 처리 구현 가능)

- 프레임워크
    : ForkJoinPool 같은 프레임워크를 사용해 병렬 처리 구현 가능 (이 프레임워크는 작업을 쉽게 분할해 병렬로 처리한 후 결과 통합 기능 제공)

- 스트림 API
    : 스트림 API 는 병렬 스트림을 통해 간편히 병렬 처리를 구현할 수 있음 (parallelStream() 메서드를 사용해 스트림 생성하고 중간 및 최종 연산을 병렬로 수행 가능)

### 병렬 처리 사용시 해결해야 할 문제점

- 상태 공유
    : 여러 스레드가 같은 데이터에 접근할 때, 데이터의 일관성 유지를 위해 동기화가 필요한데 이것이 성능 저하의 원인이 될 수 있음

- 오버헤드
    : 작업을 분할하고 스레드를 생성하는 과정에서 오버헤드가 발생할 수 있음 (작은 데이터 집합에서는 병렬 처리로 인해 오히려 성능이 저하될 수 있음)

- 결과 통합
    : 각 스레드에서 처리된 결과를 통합하는 과정에서 추가적인 복잡성이 발생할 수 있음

### 정리

```
병렬 처리는 성능 향상과 응답성 개선을 위한 기술이다.

그러나 이를 사용할때는 스레드 안정성, 오버헤드, 데이터의 일관성 유지 등 여러 요소를 고려해야한다.

병렬 처리를 효과적으로 활용하면 복잡한 계산이나 대량의 데이터 처리에서 상당한 이점을 누릴 수 있다.
```